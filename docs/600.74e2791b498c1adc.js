"use strict";(self.webpackChunkmovies=self.webpackChunkmovies||[]).push([[600],{2600:(F,p,r)=>{r.r(p),r.d(p,{DiscoverModule:()=>$});var g=r(6814),o=r(95),c=r(8978),h=r(8543),m=r(3477),u=r(4150),l=r(1451),t=r(9468),d=r(8618),f=r(1099),_=r(7091),Z=r(5619),C=r(7398),y=r(9397),A=r(9862);let w=(()=>{class i{constructor(e){this.http=e,this._watchProviders=new Z.X([]),this.watchProviders$=this._watchProviders.asObservable(),this.getWatchProviders().subscribe()}sortByProviderName(e,n){return e.provider_name>n.provider_name?1:n.provider_name>e.provider_name?-1:0}getWatchProviders(){return this.http.get("watch/providers/movie?watch_region=US").pipe((0,C.U)(e=>e.results.sort(this.sortByProviderName)),(0,y.b)(e=>this._watchProviders.next(e)))}static#t=this.\u0275fac=function(n){return new(n||i)(t.LFG(A.eN))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var S=r(9891),P=r(1818);function T(i,s){if(1&i&&(t.TgZ(0,"option",15),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function D(i,s){if(1&i&&(t.ynx(0),t.YNc(1,T,2,2,"option",14),t.BQk()),2&i){const e=s.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function x(i,s){if(1&i&&(t.TgZ(0,"option",15),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.certification),t.xp6(1),t.Oqu(e.certification)}}function J(i,s){if(1&i&&(t.ynx(0),t.YNc(1,x,2,2,"option",14),t.BQk()),2&i){const e=s.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function N(i,s){if(1&i&&(t.TgZ(0,"option",15),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.provider_id),t.xp6(1),t.Oqu(e.provider_name)}}function I(i,s){if(1&i&&(t.ynx(0),t.YNc(1,N,2,2,"option",14),t.BQk()),2&i){const e=s.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function Q(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-pagination",16),t.NdJ("nextPageEvent",function(a){t.CHM(e);const v=t.oxw();return t.KtG(v.goToPage(a))}),t.qZA(),t._UZ(2,"app-movie-list",17),t.TgZ(3,"app-pagination",16),t.NdJ("nextPageEvent",function(a){t.CHM(e);const v=t.oxw();return t.KtG(v.goToPage(a))}),t.qZA(),t.BQk()}if(2&i){const e=s.ngIf;t.xp6(1),t.Q6J("page",e.page)("totalPages",e.total_pages),t.xp6(1),t.Q6J("displayAll",!0)("movies",e.results),t.xp6(1),t.Q6J("page",e.page)("totalPages",e.total_pages)}}const U=[{path:"",component:(()=>{class i{constructor(e,n,a,v){this.genresSvc=e,this.moviesSvc=n,this.ratingsSvc=a,this.watchProvidersSvc=v}ngOnInit(){this.form=new o.cw({certification:new o.NI(this.moviesSvc.getCurrentDiscoverCriteria().certification||""),with_genres:new o.NI(this.moviesSvc.getCurrentDiscoverCriteria().with_genres||""),with_watch_providers:new o.NI(this.moviesSvc.getCurrentDiscoverCriteria().with_watch_providers||""),year:new o.NI(this.moviesSvc.getCurrentDiscoverCriteria().year||"",o.kI.pattern(/^\d{4}$/))}),this.genres$=this.genresSvc.genres$,this.ratings$=this.ratingsSvc.ratings$,this.searchResults$=this.moviesSvc.discover(),this.watchProviders$=this.watchProvidersSvc.watchProviders$}goToPage(e){this.moviesSvc.changeSearchCriteria({certification:this.moviesSvc.getCurrentDiscoverCriteria().certification,page:e,type:"discover",with_genres:this.moviesSvc.getCurrentDiscoverCriteria().with_genres,with_watch_providers:this.moviesSvc.getCurrentDiscoverCriteria().with_watch_providers,year:this.moviesSvc.getCurrentDiscoverCriteria().year})}onSubmit(){const e=this.form.value;this.moviesSvc.changeSearchCriteria({certification:e.certification,page:1,type:"discover",with_genres:e.with_genres,with_watch_providers:e.with_watch_providers,year:e.year})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(d.S),t.Y36(f.I),t.Y36(_.w),t.Y36(w))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-discover"]],decls:42,vars:14,consts:[[1,"container"],["clrForm","","clrLayout","compact",3,"formGroup","ngSubmit"],["for","genre"],["clrSelect","","id","genre","formControlName","with_genres"],["value",""],[4,"ngIf"],["for","rating"],["clrSelect","","id","rating","formControlName","certification"],["for","watchProvider"],["clrSelect","","id","watchProvider","formControlName","with_watch_providers"],["for","year"],["clrInput","","type","text","id","year","formControlName","year","placeholder","Any Year"],["type","submit",1,"btn","btn-primary",3,"disabled"],["id","top"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"page","totalPages","nextPageEvent"],["layout","list",3,"displayAll","movies"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Discover"),t.qZA(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return a.onSubmit()}),t.TgZ(4,"clr-select-container")(5,"label",2),t._uU(6,"Genre"),t.qZA(),t.TgZ(7,"select",3)(8,"option",4),t._uU(9,"Any Genre"),t.qZA(),t.YNc(10,D,2,1,"ng-container",5),t.ALo(11,"async"),t.qZA()(),t.TgZ(12,"clr-select-container")(13,"label",6),t._uU(14,"Rating"),t.qZA(),t.TgZ(15,"select",7)(16,"option",4),t._uU(17,"Any Rating"),t.qZA(),t.YNc(18,J,2,1,"ng-container",5),t.ALo(19,"async"),t.qZA(),t.TgZ(20,"clr-control-helper"),t._uU(21,"Less than or equal to the selected rating."),t.qZA()(),t.TgZ(22,"clr-select-container")(23,"label",8),t._uU(24,"Watch Provider"),t.qZA(),t.TgZ(25,"select",9)(26,"option",4),t._uU(27,"Any Watch Provider"),t.qZA(),t.YNc(28,I,2,1,"ng-container",5),t.ALo(29,"async"),t.qZA()(),t.TgZ(30,"clr-input-container")(31,"label",10),t._uU(32,"Year"),t.qZA(),t._UZ(33,"input",11),t.TgZ(34,"clr-control-error"),t._uU(35,"Year must be 4 digits."),t.qZA()(),t.TgZ(36,"p")(37,"button",12),t._uU(38,"Submit"),t.qZA()()(),t._UZ(39,"div",13),t.YNc(40,Q,4,6,"ng-container",5),t.ALo(41,"async"),t.qZA()),2&n&&(t.xp6(3),t.Q6J("formGroup",a.form),t.xp6(7),t.Q6J("ngIf",t.lcZ(11,6,a.genres$)),t.xp6(8),t.Q6J("ngIf",t.lcZ(19,8,a.ratings$)),t.xp6(10),t.Q6J("ngIf",t.lcZ(29,10,a.watchProviders$)),t.xp6(9),t.Q6J("disabled",!a.form.valid),t.xp6(3),t.Q6J("ngIf",t.lcZ(41,12,a.searchResults$)))},dependencies:[c.MgK,c.VqA,c.CM6,c.YAP,c.mIp,c.xRP,c.G55,c.otW,c.dTv,g.sg,g.O5,S.O,P.Q,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.sg,o.u,g.Ov]})}return i})()}];let Y=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(U),l.Bz]})}return i})(),$=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[c.K6A,g.ez,h.I,m.H,u.u,o.UX,Y]})}return i})()}}]);