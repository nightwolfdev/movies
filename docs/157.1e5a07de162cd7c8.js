"use strict";(self.webpackChunkmovies=self.webpackChunkmovies||[]).push([[157],{6157:(F,p,i)=>{i.r(p),i.d(p,{DiscoverModule:()=>$});var g=i(6895),n=i(433),a=i(7980),m=i(97),h=i(740),u=i(8882),l=i(6123),e=i(1571),d=i(2368),f=i(9991),Z=i(5807),_=i(1135),C=i(4004),y=i(8505),S=i(529);let A=(()=>{class o{constructor(t){this.http=t,this._watchProviders=new _.X([]),this.watchProviders$=this._watchProviders.asObservable(),this.getWatchProviders().subscribe()}sortByProviderName(t,s){return t.provider_name>s.provider_name?1:s.provider_name>t.provider_name?-1:0}getWatchProviders(){return this.http.get("watch/providers/movie?watch_region=US").pipe((0,C.U)(t=>t.results.sort(this.sortByProviderName)),(0,y.b)(t=>this._watchProviders.next(t)))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(S.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var P=i(761),w=i(3556);function T(o,r){if(1&o&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function D(o,r){if(1&o&&(e.ynx(0),e.YNc(1,T,2,2,"option",14),e.BQk()),2&o){const t=r.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function x(o,r){if(1&o&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.certification),e.xp6(1),e.Oqu(t.certification)}}function J(o,r){if(1&o&&(e.ynx(0),e.YNc(1,x,2,2,"option",14),e.BQk()),2&o){const t=r.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function N(o,r){if(1&o&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.provider_id),e.xp6(1),e.Oqu(t.provider_name)}}function I(o,r){if(1&o&&(e.ynx(0),e.YNc(1,N,2,2,"option",14),e.BQk()),2&o){const t=r.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Q(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-pagination",16),e.NdJ("nextPageEvent",function(c){e.CHM(t);const v=e.oxw();return e.KtG(v.goToPage(c))}),e.qZA(),e._UZ(2,"app-movie-list",17),e.TgZ(3,"app-pagination",16),e.NdJ("nextPageEvent",function(c){e.CHM(t);const v=e.oxw();return e.KtG(v.goToPage(c))}),e.qZA(),e.BQk()}if(2&o){const t=r.ngIf;e.xp6(1),e.Q6J("page",t.page)("totalPages",t.total_pages),e.xp6(1),e.Q6J("displayAll",!0)("movies",t.results),e.xp6(1),e.Q6J("page",t.page)("totalPages",t.total_pages)}}const U=[{path:"",component:(()=>{class o{constructor(t,s,c,v){this.genresSvc=t,this.moviesSvc=s,this.ratingsSvc=c,this.watchProvidersSvc=v}ngOnInit(){this.form=new n.cw({certification:new n.NI(this.moviesSvc.getCurrentDiscoverCriteria().certification||""),with_genres:new n.NI(this.moviesSvc.getCurrentDiscoverCriteria().with_genres||""),with_watch_providers:new n.NI(this.moviesSvc.getCurrentDiscoverCriteria().with_watch_providers||""),year:new n.NI(this.moviesSvc.getCurrentDiscoverCriteria().year||"",n.kI.pattern(/^\d{4}$/))}),this.genres$=this.genresSvc.genres$,this.ratings$=this.ratingsSvc.ratings$,this.searchResults$=this.moviesSvc.discover(),this.watchProviders$=this.watchProvidersSvc.watchProviders$}goToPage(t){this.moviesSvc.changeSearchCriteria({certification:this.moviesSvc.getCurrentDiscoverCriteria().certification,page:t,type:"discover",with_genres:this.moviesSvc.getCurrentDiscoverCriteria().with_genres,with_watch_providers:this.moviesSvc.getCurrentDiscoverCriteria().with_watch_providers,year:this.moviesSvc.getCurrentDiscoverCriteria().year})}onSubmit(){const t=this.form.value;this.moviesSvc.changeSearchCriteria({certification:t.certification,page:1,type:"discover",with_genres:t.with_genres,with_watch_providers:t.with_watch_providers,year:t.year})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.S),e.Y36(f.I),e.Y36(Z.w),e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-discover"]],decls:42,vars:14,consts:[[1,"container"],["clrForm","","clrLayout","compact",3,"formGroup","ngSubmit"],["for","genre"],["clrSelect","","id","genre","formControlName","with_genres"],["value",""],[4,"ngIf"],["for","rating"],["clrSelect","","id","rating","formControlName","certification"],["for","watchProvider"],["clrSelect","","id","watchProvider","formControlName","with_watch_providers"],["for","year"],["clrInput","","type","text","id","year","formControlName","year","placeholder","Any Year"],["type","submit",1,"btn","btn-primary",3,"disabled"],["id","top"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"page","totalPages","nextPageEvent"],["layout","list",3,"displayAll","movies"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Discover"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(4,"clr-select-container")(5,"label",2),e._uU(6,"Genre"),e.qZA(),e.TgZ(7,"select",3)(8,"option",4),e._uU(9,"Any Genre"),e.qZA(),e.YNc(10,D,2,1,"ng-container",5),e.ALo(11,"async"),e.qZA()(),e.TgZ(12,"clr-select-container")(13,"label",6),e._uU(14,"Rating"),e.qZA(),e.TgZ(15,"select",7)(16,"option",4),e._uU(17,"Any Rating"),e.qZA(),e.YNc(18,J,2,1,"ng-container",5),e.ALo(19,"async"),e.qZA(),e.TgZ(20,"clr-control-helper"),e._uU(21,"Less than or equal to the selected rating."),e.qZA()(),e.TgZ(22,"clr-select-container")(23,"label",8),e._uU(24,"Watch Provider"),e.qZA(),e.TgZ(25,"select",9)(26,"option",4),e._uU(27,"Any Watch Provider"),e.qZA(),e.YNc(28,I,2,1,"ng-container",5),e.ALo(29,"async"),e.qZA()(),e.TgZ(30,"clr-input-container")(31,"label",10),e._uU(32,"Year"),e.qZA(),e._UZ(33,"input",11),e.TgZ(34,"clr-control-error"),e._uU(35,"Year must be 4 digits."),e.qZA()(),e.TgZ(36,"p")(37,"button",12),e._uU(38,"Submit"),e.qZA()()(),e._UZ(39,"div",13),e.YNc(40,Q,4,6,"ng-container",5),e.ALo(41,"async"),e.qZA()),2&t&&(e.xp6(3),e.Q6J("formGroup",s.form),e.xp6(7),e.Q6J("ngIf",e.lcZ(11,6,s.genres$)),e.xp6(8),e.Q6J("ngIf",e.lcZ(19,8,s.ratings$)),e.xp6(10),e.Q6J("ngIf",e.lcZ(29,10,s.watchProviders$)),e.xp6(9),e.Q6J("disabled",!s.form.valid),e.xp6(3),e.Q6J("ngIf",e.lcZ(41,12,s.searchResults$)))},dependencies:[a.MgK,a.VqA,a.CM6,a.YAP,a.mIp,a.xRP,a.G55,a.otW,a.dTv,g.sg,g.O5,P.O,w.Q,n._Y,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.JL,n.sg,n.u,g.Ov]}),o})()}];let Y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.Bz.forChild(U),l.Bz]}),o})(),$=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[a.K6A,g.ez,m.I,h.H,u.u,n.UX,Y]}),o})()}}]);